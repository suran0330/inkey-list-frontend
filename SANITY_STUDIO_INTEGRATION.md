# Sanity Studio Integration - Complete Setup Guide\n\nThis document outlines the complete integration of Sanity Studio into the INKEY List frontend repository.\n\n## Overview\n\nSanity Studio is now fully integrated into the frontend application at the `/studio` route. Content editors can access the studio directly from the live site and changes will be immediately reflected through live preview and automatic revalidation.\n\n## Integration Features\n\n✅ **Sanity Studio at `/studio` route**\n✅ **Live Preview** - See changes instantly\n✅ **Auto-Revalidation** - Content updates trigger page rebuilds\n✅ **Draft Mode** - Preview unpublished changes\n✅ **Visual Editing** - Edit content in context\n✅ **Webhooks** - Automatic cache invalidation\n✅ **Schema Management** - All content types from admin repo\n\n## File Structure\n\n```\nsrc/\n├── app/\n│   ├── api/\n│   │   ├── draft/route.ts          # Enable draft mode\n│   │   ├── disable-draft/route.ts  # Disable draft mode\n│   │   ├── preview/route.ts         # Preview API\n│   │   ├── revalidate/route.ts      # Revalidation webhook\n│   │   └── sanity/\n│   │       └── webhook/route.ts     # Sanity webhook handler\n│   └── studio/\n│       └── [[...index]]/\n│           └── page.tsx             # Studio page component\n├── lib/\n│   └── sanity.ts                    # Updated client config\n└── sanity/\n    ├── sanity.config.ts             # Studio configuration\n    └── schemaTypes/\n        ├── index.ts                 # Schema exports\n        ├── homepage.ts              # Homepage schema\n        ├── banner.ts                # Banner schema\n        ├── blogPost.ts              # Blog post schema\n        ├── category.ts              # Category schema\n        ├── globalContent.ts         # Global content schema\n        ├── page.ts                  # Page schema\n        ├── product.ts               # Product schema\n        └── siteSettings.ts          # Site settings schema\n```\n\n## Environment Variables\n\nThe following environment variables must be configured in Vercel:\n\n### Required Variables\n```bash\nNEXT_PUBLIC_SANITY_PROJECT_ID=zqetc89y\nNEXT_PUBLIC_SANITY_DATASET=production\nSANITY_API_TOKEN=skCIUBXDA9nQDKSLKwecrRA0WQTXOdbgsFgJaOluVCDXpDjhazBhlYShczJC20tKt0iWPJZQ8gHBKsNJrJ72MNoW1VZGHGWunH30CmFzajbxs7oD8RvwaiqDbPHboZXuEvUSgfsjIullyyHJ7wqSuFW8BgYWYvxPdNor1aVPxXPeBHUQqBtD\nNEXT_PUBLIC_SANITY_TOKEN=skhbPSi0fqjmcaX5CshsZfHIeUjzW4i9GTFmHinuJQjUTH0tS1crdSQ5lGrnlL7CeaHJdGDG1NstxV06kxzb1hTkUIMNa1bHEGI7UDm9si6iPZK2hYTLcug1B55ZVAP8C07jkKuLojtSOefwBZcY1kb7i5iXI5nm2kVgcsUFfEzKU50vTQPo\nSANITY_REVALIDATE_SECRET=K93afja23AJAJJKLLJasfiwl_8zxcv9012\nNEXT_PUBLIC_SITE_URL=https://inkey-list-frontend.vercel.app\n```\n\n### Variable Descriptions\n\n- **NEXT_PUBLIC_SANITY_PROJECT_ID**: Sanity project ID (public)\n- **NEXT_PUBLIC_SANITY_DATASET**: Dataset name (public)\n- **SANITY_API_TOKEN**: Write token for content management (private)\n- **NEXT_PUBLIC_SANITY_TOKEN**: Read token for public operations (public)\n- **SANITY_REVALIDATE_SECRET**: Secret for webhook authentication (private)\n- **NEXT_PUBLIC_SITE_URL**: Base URL for preview links (public)\n\n## Accessing Sanity Studio\n\n1. **Development**: http://localhost:3000/studio\n2. **Production**: https://inkey-list-frontend.vercel.app/studio\n\n## Studio Features\n\n### Content Management\n- **Homepage**: Manage hero sections, featured products, content blocks\n- **Products**: Product catalog with categories and metadata\n- **Blog Posts**: Articles with rich content and SEO settings\n- **Pages**: Static pages with flexible content sections\n- **Banners**: Site-wide notification banners\n- **Global Content**: Header, footer, and site-wide settings\n\n### Visual Editing\n- **Live Preview**: See changes as you edit\n- **Draft Mode**: Preview unpublished content\n- **Multi-location**: Edit content in context across pages\n\n### SEO & Analytics\n- **Meta Tags**: Title, description, keywords\n- **Open Graph**: Social media sharing\n- **Schema.org**: Structured data\n- **Analytics**: Google Analytics integration\n\n## Webhooks Setup\n\n### Sanity Webhook Configuration\n\n1. Go to Sanity Studio → API → Webhooks\n2. Create a new webhook with:\n   - **URL**: `https://inkey-list-frontend.vercel.app/api/revalidate`\n   - **Trigger**: Document changes\n   - **Secret**: Use `SANITY_REVALIDATE_SECRET` value\n   - **Headers**: `sanity-webhook-secret: [secret]`\n\n### Webhook Events\n\nThe webhook automatically handles:\n- **Homepage**: Revalidates `/`\n- **Products**: Revalidates `/products` and individual product pages\n- **Blog Posts**: Revalidates `/blog` and individual post pages\n- **Pages**: Revalidates specific page routes\n- **Global Content**: Revalidates all major pages\n\n## Live Preview URLs\n\nThe studio provides live preview for:\n- **Homepage**: `/?preview=true`\n- **Products**: `/products/[slug]?preview=true`\n- **Blog Posts**: `/blog/[slug]?preview=true`\n- **Pages**: `/[slug]?preview=true`\n\n## Content Types\n\n### Homepage\n- Hero section with background image and CTA\n- Featured products section\n- Flexible content blocks\n- SEO settings\n\n### Products\n- Product information and images\n- Categories and tags\n- Pricing and inventory status\n- SEO optimization\n\n### Blog Posts\n- Rich text content with images\n- Author information\n- Categories and tags\n- Social sharing settings\n\n### Pages\n- Flexible page builder\n- Multiple section types\n- SEO configuration\n- Custom layouts\n\n### Banners\n- Site-wide notifications\n- Targeting by page/section\n- Scheduling and priority\n- Custom styling\n\n### Global Content\n- Site header and navigation\n- Footer content and links\n- Social media links\n- Contact information\n\n## Security Features\n\n- **Authentication**: Sanity handles user authentication\n- **Authorization**: Role-based access control\n- **Webhook Security**: Secret-based verification\n- **CORS**: Properly configured for studio access\n- **Token Scoping**: Separate read/write tokens\n\n## Performance Optimization\n\n- **CDN**: Uses Sanity CDN for image delivery\n- **Caching**: Intelligent cache invalidation\n- **ISR**: Incremental Static Regeneration\n- **Compression**: Optimized image formats\n- **Lazy Loading**: On-demand content loading\n\n## Troubleshooting\n\n### Studio Not Loading\n1. Check environment variables are set correctly\n2. Verify project ID and dataset are correct\n3. Ensure all dependencies are installed\n\n### Preview Not Working\n1. Check `SANITY_REVALIDATE_SECRET` is set\n2. Verify draft mode API routes are accessible\n3. Check browser console for errors\n\n### Webhook Issues\n1. Verify webhook URL is correct\n2. Check secret matches environment variable\n3. Monitor webhook delivery logs in Sanity\n\n### Live Preview Problems\n1. Ensure `NEXT_PUBLIC_SITE_URL` is correct\n2. Check visual editing is enabled in studio config\n3. Verify preview URLs are properly configured\n\n## Development Workflow\n\n1. **Content Changes**: Edit in studio → Auto-preview → Publish → Auto-revalidate\n2. **Schema Changes**: Update schema files → Deploy → Studio reflects changes\n3. **Testing**: Use draft mode for testing before publishing\n4. **Deployment**: Changes automatically sync across environments\n\n## Next Steps\n\n1. **Configure Vercel Environment Variables** (priority)\n2. **Set up Sanity Webhooks** for auto-revalidation\n3. **Test Studio Access** at /studio route\n4. **Verify Live Preview** functionality\n5. **Configure User Permissions** in Sanity\n6. **Set up Monitoring** for webhook delivery\n\n## Support\n\nFor issues or questions:\n1. Check this documentation first\n2. Review Sanity Studio documentation\n3. Check deployment logs in Vercel\n4. Monitor webhook delivery in Sanity dashboard\n\n---\n\n**Integration Status**: ✅ Complete\n**Studio URL**: `/studio`\n**Environment**: Production Ready\n**Last Updated**: June 3, 2025"